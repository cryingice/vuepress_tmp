<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器部分 | cryingice的博客</title>
    <meta name="description" content="我的心路历程">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.a0ada997.css" as="style"><link rel="preload" href="/assets/js/app.f71eca70.js" as="script"><link rel="preload" href="/assets/js/2.94312da7.js" as="script"><link rel="preload" href="/assets/js/18.e49d0496.js" as="script"><link rel="prefetch" href="/assets/js/10.292faecb.js"><link rel="prefetch" href="/assets/js/11.0381427f.js"><link rel="prefetch" href="/assets/js/12.96c2b360.js"><link rel="prefetch" href="/assets/js/13.7dde94b0.js"><link rel="prefetch" href="/assets/js/14.473d7e94.js"><link rel="prefetch" href="/assets/js/15.759a785e.js"><link rel="prefetch" href="/assets/js/16.313f9786.js"><link rel="prefetch" href="/assets/js/17.42f32997.js"><link rel="prefetch" href="/assets/js/19.043baecb.js"><link rel="prefetch" href="/assets/js/20.09fbd331.js"><link rel="prefetch" href="/assets/js/21.8e26480f.js"><link rel="prefetch" href="/assets/js/22.c58259aa.js"><link rel="prefetch" href="/assets/js/23.2fa89c59.js"><link rel="prefetch" href="/assets/js/24.9b2901a3.js"><link rel="prefetch" href="/assets/js/3.25f6f5d8.js"><link rel="prefetch" href="/assets/js/4.18750aec.js"><link rel="prefetch" href="/assets/js/5.523de1f2.js"><link rel="prefetch" href="/assets/js/6.6483a40f.js"><link rel="prefetch" href="/assets/js/7.02d16720.js"><link rel="prefetch" href="/assets/js/8.83068d16.js"><link rel="prefetch" href="/assets/js/9.622c1541.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a0ada997.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">cryingice的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端面试</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">前端面试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">效率</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/effectiveness/markdown/" class="nav-link">markdown语法</a></li></ul></div></div><div class="nav-item"><a href="/reprint/" class="nav-link">优文转载</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">源码学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code-resource/vue/" class="nav-link">vue源码学习</a></li><li class="dropdown-item"><!----> <a href="/code-resource/react/" class="nav-link">react源码学习</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">优秀博客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.zhangxinxu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  张鑫旭-鑫空间-鑫生活
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">私人空间</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/private-fold/favorite-lyric/" class="nav-link">喜欢的歌曲歌词</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">个人主页</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/cryingice" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端面试</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/interview/" class="nav-link">前端面试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">效率</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/effectiveness/markdown/" class="nav-link">markdown语法</a></li></ul></div></div><div class="nav-item"><a href="/reprint/" class="nav-link">优文转载</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">源码学习</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/code-resource/vue/" class="nav-link">vue源码学习</a></li><li class="dropdown-item"><!----> <a href="/code-resource/react/" class="nav-link">react源码学习</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">优秀博客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.zhangxinxu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  张鑫旭-鑫空间-鑫生活
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">私人空间</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/private-fold/favorite-lyric/" class="nav-link">喜欢的歌曲歌词</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">个人主页</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/cryingice" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction/js-basis/" class="sidebar-link">Js基础知识</a></li><li><a href="/introduction/js-special/" class="sidebar-link">Js的特殊点</a></li><li><a href="/introduction/es6/" class="sidebar-link">ES6</a></li><li><a href="/introduction/browser/" class="active sidebar-link">浏览器部分</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/introduction/browser/#跨域解决方案" class="sidebar-link">跨域解决方案</a></li><li class="sidebar-sub-header"><a href="/introduction/browser/#localstorage" class="sidebar-link">localStorage</a></li><li class="sidebar-sub-header"><a href="/introduction/browser/#js-基础知识" class="sidebar-link">js 基础知识</a></li><li class="sidebar-sub-header"><a href="/introduction/browser/#ajax请求" class="sidebar-link">ajax请求</a></li><li class="sidebar-sub-header"><a href="/introduction/browser/#token" class="sidebar-link">token</a></li><li class="sidebar-sub-header"><a href="/introduction/browser/#事件捕获和冒泡" class="sidebar-link">事件捕获和冒泡</a></li><li class="sidebar-sub-header"><a href="/introduction/browser/#history-和-hash-路由的区别" class="sidebar-link">history 和 hash 路由的区别</a></li><li class="sidebar-sub-header"><a href="/introduction/browser/#手写代码" class="sidebar-link">手写代码</a></li></ul></li><li><a href="/introduction/css-fold/" class="sidebar-link">css</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器部分"><a href="#浏览器部分" aria-hidden="true" class="header-anchor">#</a> 浏览器部分</h1> <h2 id="跨域解决方案"><a href="#跨域解决方案" aria-hidden="true" class="header-anchor">#</a> 跨域解决方案</h2> <h3 id="jsonp"><a href="#jsonp" aria-hidden="true" class="header-anchor">#</a> jsonp</h3> <h3 id="document-domain-iframe跨域"><a href="#document-domain-iframe跨域" aria-hidden="true" class="header-anchor">#</a> document.domain + iframe跨域</h3> <ul><li><p>适用于两个网页主域名相同,子域名不同的情况</p></li> <li><p>iframe标签src引入第二个页面,在连个脚本里面设置相同的document.domain,就可以相互取对方的window属性值</p></li></ul> <h3 id="location-hash-iframe跨域"><a href="#location-hash-iframe跨域" aria-hidden="true" class="header-anchor">#</a> location.hash  + iframe跨域</h3> <h2 id="localstorage"><a href="#localstorage" aria-hidden="true" class="header-anchor">#</a> localStorage</h2> <h3 id="只能存字符串"><a href="#只能存字符串" aria-hidden="true" class="header-anchor">#</a> 只能存字符串</h3> <h3 id="如果储存对象-会调用tostring方法将其转换"><a href="#如果储存对象-会调用tostring方法将其转换" aria-hidden="true" class="header-anchor">#</a> 如果储存对象,会调用toString方法将其转换</h3> <ul><li><p>所以一般对象、数组会在在存入前调用JSON.stringfy()转换为json</p></li> <li><p>取出对象用localStorage.getItem(key)</p></li> <li><p>取出后利用JSON.parse(jsonStr)转成对象</p></li> <li><p>JSON.stringify()在转成json字符串的时候会忽略undefined、symbol、函数</p> <ul><li><p>例子:1)let newObj = {a:1,b:undefined,c:null,d:{c:44,g:{a:1},dd:undefined,ee:Symbol('77')},g:Symbol('sd'),fn:function(){}}</p></li> <li><p>2)JSON.stringify(newObj) -&gt; &quot;{&quot;a&quot;:1,&quot;c&quot;:null,&quot;d&quot;:{&quot;c&quot;:44,&quot;g&quot;:{&quot;a&quot;:1}}}&quot;</p></li></ul></li></ul> <h3 id="localstorage声明周期永久-除非用户手动删除"><a href="#localstorage声明周期永久-除非用户手动删除" aria-hidden="true" class="header-anchor">#</a> localStorage声明周期永久,除非用户手动删除</h3> <h3 id="于sessionstorage的区别"><a href="#于sessionstorage的区别" aria-hidden="true" class="header-anchor">#</a> 于sessionStorage的区别</h3> <ul><li><p>sessionStorage声明周期仅在tab窗口存在时间,localStorage则是永久</p></li> <li><p>前者不支持tab窗口共享数据,后者支持</p></li></ul> <h2 id="js-基础知识"><a href="#js-基础知识" aria-hidden="true" class="header-anchor">#</a> js 基础知识</h2> <h3 id="堆和栈-队列"><a href="#堆和栈-队列" aria-hidden="true" class="header-anchor">#</a> 堆和栈/队列</h3> <ul><li><p>基本数据类型 和 函数 保存在栈内存里,后进先出</p></li> <li><p>引用数据类型保存在堆内存中,不能直接读取,得从栈内存中读取地址,再通过地址去进行读取</p></li> <li><p>宏任务和微任务属于队列,当栈内任务执行完成后,会观察有没有微任务队列,如果有则放入执行栈执行,执行后若产生新的微任务则继续执行微任务,微任务执行完成后,才会执行宏任务</p> <ul><li><p>promise中如果状态变为fulfilled 或者 rejected,则会产生微任务,promise.then()也会产生微任务</p></li> <li><p>setimeout会在微任务执行完成后加入一个宏任务</p></li></ul></li></ul> <h3 id="进程和线程"><a href="#进程和线程" aria-hidden="true" class="header-anchor">#</a> 进程和线程</h3> <ul><li><p>进程:多个线程组成</p> <ul><li>多进程间互不影响</li></ul></li> <li><p>线程:是个更加接近执行体的概念,可与同进程的其他线程同享资源</p> <ul><li><p>有自己独立的序列</p></li> <li><p>有自己的执行栈</p></li> <li><p>没有独立的地址空间</p></li></ul></li> <li><p>电脑系统属于多进程</p></li></ul> <h3 id="并发和并行"><a href="#并发和并行" aria-hidden="true" class="header-anchor">#</a> 并发和并行</h3> <ul><li><p>并发:同时完成多个任务可以交替进行</p> <ul><li>记忆:病发 要剃(替)头发</li></ul></li> <li><p>并行:同时进行多个任务,不可交替进行</p></li></ul> <h2 id="ajax请求"><a href="#ajax请求" aria-hidden="true" class="header-anchor">#</a> ajax请求</h2> <h3 id="文件内容索引-url转码、post的几种提交数据的方式、tolowercase-和-tolocallowercase-的区别、xhr、setimeout、异步串行"><a href="#文件内容索引-url转码、post的几种提交数据的方式、tolowercase-和-tolocallowercase-的区别、xhr、setimeout、异步串行" aria-hidden="true" class="header-anchor">#</a> 文件内容索引:url转码、post的几种提交数据的方式、toLowerCase()和 toLocalLowerCase()的区别、xhr、setimeout、异步串行</h3> <h3 id="url转码"><a href="#url转码" aria-hidden="true" class="header-anchor">#</a> url转码</h3> <ul><li><p>decodeURI</p> <ul><li>解码</li></ul></li> <li><p>encodeURI</p> <ul><li>转码,输出utf-8的格式</li></ul></li> <li><p>decodeURIComponent</p> <ul><li>解码</li></ul></li> <li><p>encodeURIComponent</p> <ul><li>转码</li></ul></li></ul> <h3 id="post的几种提交数据的方式"><a href="#post的几种提交数据的方式" aria-hidden="true" class="header-anchor">#</a> post的几种提交数据的方式</h3> <ul><li><p>application/x-www-form-urlencoded</p> <ul><li>原生表单的提交方式</li></ul></li> <li><p>mutipart/form-data</p> <ul><li>暂时不知道</li></ul></li> <li><p>application/json</p> <ul><li><p>请求体内容为序列化的内容(JSON.stringify()转换的内容)</p></li> <li><p>特点: 结构复杂的数据内容展示清晰,在各种抓包工具或者浏览器自带工具下能清晰展示数据结构</p></li></ul></li> <li><p>text-html</p> <ul><li>传递html文件</li></ul></li></ul> <h3 id="tolowercase-和-tolocallowercase-的区别"><a href="#tolowercase-和-tolocallowercase-的区别" aria-hidden="true" class="header-anchor">#</a> toLowerCase()和 toLocalLowerCase()的区别</h3> <ul><li>有的语言会为unicode大小转换应用特殊规则,必须使用针对地区的方法来保证实现正确的转换,此时只能用toLocalLowerCase转换</li></ul> <h3 id="xhr"><a href="#xhr" aria-hidden="true" class="header-anchor">#</a> xhr</h3> <ul><li><p>open</p> <ul><li>创建http请求</li></ul></li> <li><p>setReqestHeader</p> <ul><li><p>设置请求头</p></li> <li><p>必须在open调用后,send调用前使用</p></li> <li><p>可设置多次,同名的设置时会追加值</p></li></ul></li> <li><p>timeout</p> <ul><li>超时时间,超过这个时间会触发ontimeout函数</li></ul></li> <li><p>credentials</p> <ul><li>是否请求携带cookie</li></ul></li> <li><p>send([body=null])</p> <ul><li><p>发送请求</p></li> <li><p>当方法是get、head请求时,入参会被忽略</p></li></ul></li> <li><p>abort()</p> <ul><li>请求发送后终止请求</li></ul></li> <li><p>readyState(xhr状态)</p> <ul><li><p>0 -- UNSENT  未发送</p></li> <li><p>1 -- OPEND  请求创建后(open 、send之间)</p></li> <li><p>2 -- HEADERS_RECEIVED  接受状态(send之后)</p></li> <li><p>3 -- LOADING  (正在下载数据,在这个过程可以获取响应头状态及状态码)</p></li> <li><p>4 -- DONE 数据下载完成</p></li> <li><p>对应回调函数 onreadystatechange</p></li></ul></li> <li><p>回调函数</p> <ul><li><p>onreadystatechange</p></li> <li><p>onloadstart</p> <ul><li><p>当send后触发xhr.onloadstart</p></li> <li><p>上传数据时触发xhr.upload.onloadstart</p> <ul><li>xhr.onloadstart后触发</li></ul></li></ul></li> <li><p>onprogress</p> <ul><li><p>上传数据触发xhr.upload.onprogress</p></li> <li><p>下载数据触发xhr.onprogress</p></li> <li><p>50ms触发一次</p></li></ul></li> <li><p>onabort</p> <ul><li>调用xhr.abort()后触发</li></ul></li> <li><p>onerror</p> <ul><li><p>当网络异常时触发</p> <ul><li><p>当上传数据时就异常,则先触发xhr.upload.onerror,再触发xhr.onerror</p></li> <li><p>如果上传数据已经结束,则只触发xhr.onerror</p></li></ul></li></ul></li> <li><p>onload</p> <ul><li><p>上传数据成功,触发xhr.upload.onload</p></li> <li><p>下载数据成功,触发xhr.onload</p></li></ul></li> <li><p>ontimeout</p> <ul><li>服务端响应时间超过设置时间后触发</li></ul></li> <li><p>onloadend</p> <ul><li><p>上传数据结束触发xhr.upload.onloadend</p></li> <li><p>下载数据接触触发xhr.onloadend</p></li></ul></li> <li><p>执行顺序</p> <ul><li>//调用了open方法<br>
onreadystatechange(),readyState=1<br>
//调用了send方法<br>
onloadstart()<br>
//上传数据过程中的事件回调<br>
upload.onloadstart()//开始上传请求数据<br>
upload.onprogress()//正在上传请求数据<br>
upload.onload()//成功上传请求数据<br>
upload.onloadend()//完成上传请求数据<br>
//下载响应数据过程中的事件回调<br>
onreadystatechange(),readyState=2//已经获取到响应头部和响应状态码<br>
onreadystatechange(),readyState=3//正在下载响应数据，改变状态<br>
onprogress()//正在下载响应数据<br>
onreadystatechange(),readyState=4//响应数据下载完成，改变状态<br>
onload()//成功下载响应数据<br>
onloadend()//完成下载响应数据</li></ul></li></ul></li> <li><p>xhr响应</p> <ul><li><p>xhr.getResponseHeader(string)</p> <ul><li>获取响应头指定键值的数据</li></ul></li> <li><p>xhr.getAllResponseHeader()</p> <ul><li>获取响应头所有数据</li></ul></li> <li><p>xhr.status</p> <ul><li>响应状态码</li></ul></li> <li><p>xhr.statusText</p> <ul><li>响应文本</li></ul></li> <li><p>xhr.responseType = ...</p> <ul><li>设置响应数据类型,如果服务端返回的数据类型和设置的不同,此时得到的数据就为null</li></ul></li></ul></li> <li><p>状态码</p> <ul><li><p>2xx</p> <ul><li><p>200 成功</p></li> <li><p>201 请求成功 已创建新资源</p></li> <li><p>202 接受请求,服务器尚未处理</p></li></ul></li> <li><p>3xx</p> <ul><li><p>301 永久移动</p> <ul><li>对于get head进行的请求时,爬虫爬的是新网址 和 新内容</li></ul></li> <li><p>302 临时移动</p> <ul><li><p>爬虫爬的是旧网址 和 新内容</p> <ul><li>url劫持</li></ul></li></ul></li></ul></li> <li><p>4xx</p> <ul><li><p>400</p> <ul><li>请求语法错误</li></ul></li> <li><p>401</p> <ul><li>身份验证</li></ul></li> <li><p>403</p> <ul><li>服务器拒绝请求(比如权限问题)</li></ul></li> <li><p>404</p> <ul><li>网页未找到</li></ul></li> <li><p>408</p> <ul><li>请求服务器超时</li></ul></li></ul></li> <li><p>5xx</p> <ul><li>服务器问题</li></ul></li></ul></li></ul> <h3 id="请求分类"><a href="#请求分类" aria-hidden="true" class="header-anchor">#</a> 请求分类</h3> <ul><li><p>简单请求</p> <ul><li><p>请求方法仅限于get post head</p></li> <li><p>请求头字段不超过以下: Content-type、Content-language、Accept-language、Accept四种</p></li> <li><p>用post方式时,Content-type 只能为application/x-www-form-urlencoded、multipart/form-data、text/plain三种</p></li></ul></li> <li><p>非简单请求</p> <ul><li><p>预先发一个option请求(预请求)</p> <ul><li><p>Access-Control-Request-Method:请求所用方法</p></li> <li><p>Access-Control-Request-Headers:所携带的自定义请求首部字段(如果content-type的值超出上述三种,则需要附加上content-type这一种</p></li> <li><p>服务器段返回字段</p> <ul><li><p>Access-Control-Allow-Methods :用来限制方法名</p></li> <li><p>Access-Control-Allow-Headers:用来限制请求头首部</p></li> <li><p>Access-Control-Allow-Credentials:是否允许携带credential</p></li> <li><p>Access-Control-Max-age:预请求的生效时间周期</p></li> <li><p>Access-Control-Expose-Headers:服务器段允许的首部集合</p></li></ul></li></ul></li></ul></li></ul> <h3 id="请求头-响应头"><a href="#请求头-响应头" aria-hidden="true" class="header-anchor">#</a> 请求头/响应头</h3> <ul><li><p>请求头</p> <ul><li><p>accept</p> <ul><li>客户端希望服务端返回的数据类型</li></ul></li> <li><p>Content-type</p> <ul><li>客户端发送的请求体数据类型</li></ul></li> <li><p>Accept-Encoding</p> <ul><li><p>告诉服务端返回内容需要进行压缩的方式</p></li> <li><p>配合响应报文中的Content-Encoding使用</p></li></ul></li> <li><p>Accept-Language</p> <ul><li>指定解析的语言类型</li></ul></li> <li><p>Content-Length</p> <ul><li>post的请求体大小</li></ul></li> <li><p>Cookie</p> <ul><li>把服务器先前返给客户端的cookie发送给服务器</li></ul></li> <li><p>host</p> <ul><li>请求发送到的域名以及端口号</li></ul></li> <li><p>origin</p> <ul><li><p>请求从哪发起</p></li> <li><p>配合后端Access-Control-Allow-Origin使用,用于CORS跨域</p></li> <li><p>请求流程</p> <ul><li>1.发请求给服务端,服务端返给响应2.浏览器检查是否有Access-Control-Allow-Origin,有的话对比当前域名是否在白名单里面,是的话继续下载东西,不是的话abort(终止请求下载)</li></ul></li></ul></li> <li><p>referer</p> <ul><li><p>和origin类似</p></li> <li><p>传入的参数包括url的参数等信息,可能造成信息泄露</p></li> <li><p>作用</p> <ul><li><p>可用于访问统计</p></li> <li><p>用于防盗链</p></li></ul></li></ul></li> <li><p>if-modified-since</p> <ul><li><p>配合响应头Last-modified用</p></li> <li><p>用于协商缓存</p></li></ul></li> <li><p>if-none-match</p> <ul><li><p>配合etag用</p></li> <li><p>用于协商缓存</p></li></ul></li> <li><p>user-Agent</p> <ul><li>用来识别客户端类型</li></ul></li> <li><p>cache-Control</p> <ul><li><p>用来控制缓存</p> <ul><li><p>public</p> <ul><li>客户端和代理都可以缓存</li></ul></li> <li><p>private</p> <ul><li>仅客户端可以缓存</li></ul></li> <li><p>no-cache</p> <ul><li>需要于服务端用etag确认资源是否被更改,没有则命中缓存</li></ul></li> <li><p>no-store</p> <ul><li>禁止缓存</li></ul></li> <li><p>max-age</p> <ul><li>缓存有效期</li></ul></li></ul></li></ul></li></ul></li> <li><p>响应头</p> <ul><li><p>cache-Control</p> <ul><li><p>缓存机制,参照请求头cache-Control</p></li> <li><p>优先级比expires高</p></li></ul></li> <li><p>content-Encoding</p> <ul><li>返回内容的压缩类型</li></ul></li> <li><p>content-language</p> <ul><li>响应体语言</li></ul></li> <li><p>content-length</p> <ul><li>响应体文本大小</li></ul></li> <li><p>content-type</p> <ul><li>返回内容的类型</li></ul></li> <li><p>Date</p> <ul><li>服务器端日期</li></ul></li> <li><p>etag</p> <ul><li>文件实体标签</li></ul></li> <li><p>expires</p> <ul><li><p>过期时间</p></li> <li><p>请求头没有 expires字段</p></li> <li><p>浏览器命中缓存前会辨识该字段值是否过期</p></li></ul></li> <li><p>last-modified</p> <ul><li>资源最后修改日期</li></ul></li> <li><p>refresh</p> <ul><li>重定向新网址</li></ul></li> <li><p>server</p> <ul><li>服务器类型</li></ul></li> <li><p>set-cookie</p> <ul><li>让客户端设置cookie</li></ul></li></ul></li></ul> <h2 id="token"><a href="#token" aria-hidden="true" class="header-anchor">#</a> token</h2> <h3 id="ajax传递token的作用"><a href="#ajax传递token的作用" aria-hidden="true" class="header-anchor">#</a> ajax传递token的作用</h3> <ul><li><p>1)防止表单提交重复,比对服务器session中的token 和 用户请求携带的token,如果相同服务器更新token返给客户端,客户端没接收到响应数据过程中,再次提交表单,明显就不一致了,服务器忽略此次请求</p></li> <li><p>防止跨站请求伪造</p> <ul><li>跨站请求的话发送的token和服务器session存的不一样</li></ul></li></ul> <h3 id="请求头设置token"><a href="#请求头设置token" aria-hidden="true" class="header-anchor">#</a> 请求头设置token</h3> <ul><li>xhr.setRequestHeader('token',token)</li></ul> <h3 id="储存token"><a href="#储存token" aria-hidden="true" class="header-anchor">#</a> 储存token</h3> <ul><li>在返回数据成功后window.sessionStorage.setItem('token',data['token'])</li></ul> <h2 id="事件捕获和冒泡"><a href="#事件捕获和冒泡" aria-hidden="true" class="header-anchor">#</a> 事件捕获和冒泡</h2> <h3 id="w3c标准规定先捕获后冒泡"><a href="#w3c标准规定先捕获后冒泡" aria-hidden="true" class="header-anchor">#</a> w3c标准规定先捕获后冒泡</h3> <h3 id="只能阻止继续冒泡-捕获过程不阻止"><a href="#只能阻止继续冒泡-捕获过程不阻止" aria-hidden="true" class="header-anchor">#</a> 只能阻止继续冒泡,捕获过程不阻止</h3> <ul><li>e.stopPropagation()</li></ul> <h3 id="addeventlistener函数第三个参数是boolean"><a href="#addeventlistener函数第三个参数是boolean" aria-hidden="true" class="header-anchor">#</a> addEventListener函数第三个参数是boolean</h3> <ul><li>默认useCapture为false,默认为接受冒泡事件,拒绝捕获事件</li></ul> <h3 id="第三个参数为options时-为一个对象"><a href="#第三个参数为options时-为一个对象" aria-hidden="true" class="header-anchor">#</a> 第三个参数为options时,为一个对象</h3> <ul><li><p>新版本浏览器采用这个变更</p></li> <li><p>使用前需要用能力检测一下,能使用options不</p> <ul><li><p>var canPassive = false;<br>
try{<br>
var options = Object.defineProperty({},'passive',{<br>
get(){<br>
canPassive = true;<br>
}<br>
})<br>
window.addEventListener(null,function(){},options)<br>
}catch(err){</p> <p>}</p></li></ul></li> <li><p>options对象</p> <ul><li><p>capture</p> <ul><li>true:捕获阶段传到target时触发监听函数<br>
false:冒泡阶段....</li></ul></li> <li><p>passive</p> <ul><li>监听函数永远不会调用preventDefault(),如果调用,浏览器给出警告并忽略它</li></ul></li> <li><p>once</p> <ul><li>注册之后调用一次后自行移除</li></ul></li></ul></li></ul> <h2 id="history-和-hash-路由的区别"><a href="#history-和-hash-路由的区别" aria-hidden="true" class="header-anchor">#</a> history 和 hash 路由的区别</h2> <h3 id="hash"><a href="#hash" aria-hidden="true" class="header-anchor">#</a> hash</h3> <ul><li>利用hash操作&quot;#'后面内容不会造成向服务器请求重新加载新页面,可通过onHashChange来监听链接改变</li></ul> <h3 id="history"><a href="#history" aria-hidden="true" class="header-anchor">#</a> history</h3> <ul><li><p>利用h5新增pushState 和 replaceState两个api来实现修改url记录栈,当利用浏览器的back、forward、go时不会向后端发起请求,可通过popState来监听url的改变</p></li> <li><p>history模式下对于无静态资源的链接需要后端配合返回一个index.html页面</p></li></ul> <h2 id="手写代码"><a href="#手写代码" aria-hidden="true" class="header-anchor">#</a> 手写代码</h2> <h3 id="ajax"><a href="#ajax" aria-hidden="true" class="header-anchor">#</a> ajax</h3> <ul><li><p>1.新建函数</p></li> <li><p>2.判断请求是jsonp还是非jsonp</p></li> <li><p>3.如果为非jsonp,进一步判断是get 还是post请求</p></li> <li><p>4.格式化入参</p></li> <li><p>5.判断XMLHttpRequest的兼容性</p> <ul><li><p>ie6之前</p> <ul><li>xhr = new ActiveXObject('Microsoft.XMLHTTp')</li></ul></li> <li><p>其他浏览器</p> <ul><li>xhr = new XMLHTTPRequest()</li></ul></li></ul></li> <li><p>6.书写回调过程函数</p> <ul><li><p>onload回调函数里面写详细判断</p></li> <li><p>onerror</p> <ul><li><p>请求过程发生意外</p> <ul><li>比如:请求没发出去 、时间超时、终止请求</li></ul></li></ul></li></ul></li> <li><p>7.get 请求把形式化的数据坠到url链接后面</p></li> <li><p>8.post请求设置Content-Type,不同的type对应不同的data形式</p></li></ul> <h3 id="jsonp请求"><a href="#jsonp请求" aria-hidden="true" class="header-anchor">#</a> jsonp请求</h3> <ul><li><p>1.创建一个script标签</p></li> <li><p>2.给标签src赋值</p></li> <li><p>3.script坠到document.body标签后面</p></li> <li><p>4.设置一个超时定时器</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/20/2019, 8:20:48 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/introduction/es6/" class="prev">
          ES6
        </a></span> <span class="next"><a href="/introduction/css-fold/">
          css
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f71eca70.js" defer></script><script src="/assets/js/2.94312da7.js" defer></script><script src="/assets/js/18.e49d0496.js" defer></script>
  </body>
</html>
